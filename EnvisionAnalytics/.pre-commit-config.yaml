repos:
  - repo: local
    hooks:
      - id: dotnet-format
        name: dotnet format
        entry: |
          bash -lc 'ver=$(dotnet --version 2>/dev/null | cut -d. -f1 || echo 0); if [ "$ver" -ge 10 ]; then dotnet format --verify-no-changes || (echo "Run dotnet format to fix issues" && exit 1); else echo "Skipping dotnet format: .NET SDK < 10 detected"; fi'
        language: system
        files: '\.(cs|csproj)$'

      - id: dotnet-build
        name: dotnet build
        entry: |
          bash -lc 'ver=$(dotnet --version 2>/dev/null | cut -d. -f1 || echo 0); if [ "$ver" -ge 10 ]; then dotnet build --nologo; else echo "Skipping dotnet build: .NET SDK < 10 detected"; fi'
        language: system
        stages: [commit]

      - id: dotnet-test
        name: dotnet test
        entry: |
          bash -lc 'ver=$(dotnet --version 2>/dev/null | cut -d. -f1 || echo 0); if [ "$ver" -ge 10 ]; then dotnet test --nologo --no-build; else echo "Skipping dotnet test: .NET SDK < 10 detected"; fi'
        language: system
        stages: [commit]

      - id: end-of-file-fixer
        name: fix end of file
        entry: bash -lc "python -m pip >/dev/null 2>&1 || true; true"
        language: system
        files: '.*'
